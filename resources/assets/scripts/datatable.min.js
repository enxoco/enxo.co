$(function(){$(".card-header h3").click(function(e){$("card-header h3").closest(".card").find(".collapse").toggleClass("show"),$("card-header h3").find(".ion.ion-chevron down").toggleClass("show"),$($(e.target).find(".fa.fa-plus").toggleClass("open")),$(".accordian .class").slideUp(),$(this).next().is(":hidden")&&$(this).next().slideDown()})}),$(document).ready(function(){const e=$("#hidden_device_id");function t(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2]:null}!function(){var a=moment().subtract(0,"weeks").startOf("isoWeek"),n=moment().subtract(0,"weeks").endOf("isoWeek");const o=$("#hidden_user_name");function s(a,n){$("#reportrange span").html(a.format("MMMM D, YYYY")+" - "+n.format("MMMM D, YYYY")),function(e,a,n){$.fn.DataTable.isDataTable("#example")&&$("#example").DataTable().destroy();var o=[];$("#example").DataTable({responsive:{breakpoints:[{name:"bigdesktop",width:1/0},{name:"meddesktop",width:1480},{name:"smalldesktop",width:1280},{name:"medium",width:1188},{name:"tabletl",width:1024},{name:"btwtabllandp",width:848},{name:"tabletp",width:768},{name:"mobilel",width:480},{name:"mobilep",width:320}]},ajax:{url:"/report/full/weekly/"+a+"/"+e,deferRender:!0,dataSrc:"",error:function(e,t,a){}},responsive:!0,info:!1,columns:[{title:"Date",data:"Date",render:function(e,t,a){var n=new Array(7);n[0]="Sunday",n[1]="Monday",n[2]="Tuesday",n[3]="Wednesday",n[4]="Thursday",n[5]="Friday",n[6]="Saturday";var o=new Date(e),s=o.getDay();return n[s]}},{title:"Action",data:"Action"},{title:"Site Visited",data:"URL",render:function(e,a,n){return o.push(t(e)),'<button type="button" class="btn btn-default" data-toggle="tooltip" data-placement="left" title="'+e+'">'+t(e)+"</button>"}}],language:{emptyTable:"<center>Sorry there is no activity for "+n.val()+" on this day"}})}(a.format("YYYY-MM-DD")+"_"+n.format("YYYY-MM-DD")+".json",e.val(),o),function(e,t,a){$.fn.DataTable.isDataTable("#emailTopHitsTable")&&$("#emailTopHitsTable").DataTable().destroy(),$("#emailTopHitsTable").DataTable({ajax:{url:"/report/tophits/full/"+t+"/"+e,dataSrc:"",error:function(e,t,a){}},order:[1,"desc"],columns:[{title:"Site",data:"url"},{title:"Times Visited",data:"hits"}],language:{emptyTable:"<center>Sorry there is no activity for "+a.val()+" so far this week",info:"_PAGE_ of _PAGES_ sites"}})}(a.format("YYYY-MM-DD")+"_"+n.format("YYYY-MM-DD")+".json",e.val(),o),function(e,t,a){$.fn.DataTable.isDataTable("#explicitSearchesTable")&&$("#explicitSearchesTable").DataTable().destroy(),$("#explicitSearchesTable").DataTable({ajax:{url:"/report/searches/explicit/"+t+"/"+e,dataSrc:"",error:function(e,t,a){}},order:[1,"desc"],columns:[{title:"Site",data:"Action"},{title:"Times Visited",data:"pageTitle"}],language:{emptyTable:"<center>There are no explicit searches from "+a.val()+" to report this week",info:"_PAGE_ of _PAGES_ sites"}})}(a.format("YYYY-MM-DD")+"_"+n.format("YYYY-MM-DD")+".json",e.val(),o)}$,$("#reportrange").daterangepicker({autoApply:!0,showApplyLabel:!1,showCustomRangeLabel:!1,startDate:a,endDate:n,ranges:{"This Week":[a,n],"Last week":[moment().subtract(1,"weeks").startOf("isoWeek"),moment().subtract(1,"weeks").endOf("isoWeek")],"2 Weeks ago":[moment().subtract(2,"weeks").startOf("isoWeek"),moment().subtract(2,"weeks").endOf("isoWeek")],"3 Weeks ago":[moment().subtract(3,"weeks").startOf("isoWeek"),moment().subtract(3,"weeks").endOf("isoWeek")],"1 Month ago":[moment().subtract(4,"weeks").startOf("isoWeek"),moment().subtract(4,"weeks").endOf("isoWeek")]}},s),s(a,n)}()});
